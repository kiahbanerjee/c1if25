<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dreams of Being Late</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      background-image: url("time.jpeg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 100vh;
      font-family: 'Bebas Neue', sans-serif;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .nav-button {
      position: fixed;
      top: 30px;
      text-decoration: none;
      color: #000000;
      font-size: 24px;
      z-index: 100;
      transition: opacity 0.3s ease;
    }

    .nav-button:hover {
      opacity: 0.7;
    }

    .prev-button {
      left: 30px;
    }

    .next-button {
      right: 30px;
    }

    .instruction {
      font-size: 40px;
      color: #ffffff;
      font-weight: 400;
      margin-bottom: 40px;
      text-align: center;
      z-index: 10;
      position: relative;
      text-shadow: 0 0 8px rgba(0,0,0,0.5);
    }

    .clock-container {
      position: relative;
      width: 420px;
      height: 420px;
      z-index: 10;
    }

    .clock {
      width: 100%;
      height: 100%;
      border: 6px solid #000000;
      border-radius: 50%;
      position: relative;
      background: #ffffff;
      box-shadow: 0 0 40px rgba(0,0,0,0.4);
    }

    .clock-center {
      position: absolute;
      width: 20px;
      height: 20px;
      background: #100202;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
    }

    .hand {
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform-origin: bottom center;
      background: #000000;
      cursor: pointer;
      transition: none;
    }

    .minute-hand {
      width: 5px;
      height: 180px;
      margin-left: -2.5px;
    }

    .too-late {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 56px;
      color: #ffffff;
      font-weight: 400;
      opacity: 0;
      pointer-events: none;
      animation: fadeInOut 0.8s ease;
      z-index: 100;
      text-shadow: 0 0 10px rgba(0,0,0,0.6);
    }

    @keyframes fadeInOut {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }

    .interpretation-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(255, 0, 0, 0.82);
      z-index: 1000;
      display: none;
      cursor: pointer;
    }

    .interpretation-screen.show {
      display: block;
    }

    .interpretation-screen .nav-button {
      z-index: 1100;
    }

    .intro-text {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 44px;
      color: #ffffff;
      font-weight: 400;
      text-align: center;
      opacity: 0;
      animation: fadeIn 2s ease forwards;
      max-width: 80%;
      text-shadow: 0 0 10px rgba(0,0,0,0.6);
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .interpretation {
      position: fixed;
      max-width: 650px;
      padding: 40px;
      border: none;
      background: transparent;
      opacity: 0;
      transition: opacity 0.5s ease;
      outline: none;
    }

    .interpretation.visible {
      opacity: 1;
    }

    .interpretation h3 {
      font-size: 30px;
      color: #000000;
      margin-bottom: 14px;
      font-weight: 400;
    }

    .interpretation p {
      font-size: 20px;
      color: #ffffff;
      line-height: 1.6;
      font-weight: 400;
    }
  </style>
</head>
<body>
  <a href="Dream-4.html" class="nav-button prev-button">← Previous</a>
  <a href="Dream-6.html" class="nav-button next-button">Next →</a>

  <div class="instruction" id="instruction">Catch the time</div>
  
  <div class="clock-container">
    <div class="clock">
      <div class="hand minute-hand" id="minuteHand"></div>
      <div class="clock-center"></div>
    </div>
  </div>

  <div class="interpretation-screen" id="interpretationScreen">
    <a href="Dream-4.html" class="nav-button prev-button">← Previous</a>
    <a href="Dream-6.html" class="nav-button next-button">Next →</a>
    <div class="intro-text" id="introText">This is why we dream of being late...</div>
  </div>

  <audio id="alarmAudio" src="alarm.mp3" preload="auto"></audio>

  <script>
    const minuteHand = document.getElementById('minuteHand');
    const instruction = document.getElementById('instruction');
    const interpretationScreen = document.getElementById('interpretationScreen');
    const introText = document.getElementById('introText');
    const alarmAudio = document.getElementById('alarmAudio');

    let angle = 0;
    let speed = 5;
    let evading = true;
    const startTime = Date.now();
    let animationId = null;
    let alarmPlayed = false;
    let userInteracted = false;

    const interpretations = [
      {
        title: "1. Fear of Missing Opportunities",
        text: "You might worry about missing chances in real life — jobs, relationships, deadlines, or personal goals."
      },
      {
        title: "2. Feeling Unprepared",
        text: "The dream can reflect anxiety about not being ready for something important, whether emotionally, mentally, or practically."
      },
      {
        title: "3. Pressure and Overwhelm",
        text: "It often appears when you're juggling too many responsibilities and feel you're falling behind."
      },
      {
        title: "4. Perfectionism",
        text: "Being late in a dream can symbolize the fear of not doing things \"perfectly\" or not doing them fast enough."
      },
      {
        title: "5. Lack of Control",
        text: "It may point to a sense that time is moving too fast or that your life direction feels unpredictable."
      },
      {
        title: "6. Resistance to Change",
        text: "Dreams of being late can happen when you're avoiding or delaying a decision or transition in your waking life."
      },
      {
        title: "7. Self-Expectation vs Reality",
        text: "It might reflect tension between who you think you should be and where you actually are right now."
      }
    ];

    function animate() {
      angle += speed;
      if (angle >= 360) angle = 0;
      minuteHand.style.transform = `rotate(${angle}deg)`;

      const elapsed = Date.now() - startTime;
      if (elapsed > 6000 && evading) {
        evading = false;
        cancelAnimationFrame(animationId);
        startInterpretations();
        return;
      }

      if (evading) {
        animationId = requestAnimationFrame(animate);
      }
    }
    animationId = requestAnimationFrame(animate);

    let mouseX = 0;
    let mouseY = 0;

    document.addEventListener('mousemove', (e) => {
      userInteracted = true;
      if (!evading) return;

      mouseX = e.clientX;
      mouseY = e.clientY;

      const handRect = minuteHand.getBoundingClientRect();
      const handCenterX = handRect.left + handRect.width / 2;
      const handCenterY = handRect.top + handRect.height / 2;
      
      const distance = Math.hypot(mouseX - handCenterX, mouseY - handCenterY);
      
      if (distance < 120) {
        speed = 15;
      } else {
        speed = 5;
      }
    });

    minuteHand.addEventListener('click', () => {
      userInteracted = true;
      if (evading) {
        showTooLate();
      }
    });

    function showTooLate() {
      const tooLate = document.createElement('div');
      tooLate.className = 'too-late';
      tooLate.textContent = 'Too late!';
      document.body.appendChild(tooLate);
      setTimeout(() => tooLate.remove(), 800);
    }

    function startInterpretations() {
      instruction.style.display = 'none';
      document.querySelector('.clock-container').style.display = 'none';
      interpretationScreen.classList.add('show');

      if (!alarmPlayed && userInteracted) {
        alarmPlayed = true;
        alarmAudio.currentTime = 0;
        alarmAudio.play().catch(() => {});
        setTimeout(() => {
          alarmAudio.pause();
          alarmAudio.currentTime = 0;
        }, 3000);
      }

      setTimeout(() => {
        introText.style.display = 'none';
        setupClickInterpretations();
      }, 3000);
    }

    let currentInterpIndex = 0;
    let currentInterpEl = null;

    function setupClickInterpretations() {
      interpretationScreen.addEventListener('click', showNextInterpretation);
      showNextInterpretation();
    }

    function showNextInterpretation() {
      if (currentInterpEl) {
        currentInterpEl.remove();
      }

      if (currentInterpIndex >= interpretations.length) {
        interpretationScreen.removeEventListener('click', showNextInterpretation);
        return;
      }

      const interp = interpretations[currentInterpIndex];

      currentInterpEl = document.createElement('div');
      currentInterpEl.className = 'interpretation';
      currentInterpEl.innerHTML = `
        <h3>${interp.title}</h3>
        <p>${interp.text}</p>
      `;

      const x = Math.random() * (window.innerWidth - 700) + 50;
      const y = Math.random() * (window.innerHeight - 300) + 100;
      currentInterpEl.style.left = x + 'px';
      currentInterpEl.style.top = y + 'px';

      interpretationScreen.appendChild(currentInterpEl);

      setTimeout(() => currentInterpEl.classList.add('visible'), 50);

      currentInterpIndex++;
    }
  </script>
</body>
</html>
